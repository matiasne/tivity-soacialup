{"version":3,"sources":["./src/app/form-pedidos-configuracion/form-pedidos-configuracion.page.html","./src/app/form-pedidos-configuracion/form-pedidos-configuracion-routing.module.ts","./src/app/form-pedidos-configuracion/form-pedidos-configuracion.module.ts","./src/app/form-pedidos-configuracion/form-pedidos-configuracion.page.scss","./src/app/form-pedidos-configuracion/form-pedidos-configuracion.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,2dAA4Z,iBAAiB,sUAAsU,2MAA2M,kBAAkB,yHAAyH,eAAe,yFAAyF,eAAe,wFAAwF,eAAe,8TAA8T,E;;;;;;;;;;;;;;;;;;;ACA3kD;AACc;AAE0B;AAEjF,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,6FAA4B;KACxC;CACF,CAAC;AAMF,IAAa,yCAAyC,GAAtD,MAAa,yCAAyC;CAAG;AAA5C,yCAAyC;IAJrD,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,yCAAyC,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;AChBb;AACM;AACF;AAEA;AAE2D;AAEvB;AAWjF,IAAa,kCAAkC,GAA/C,MAAa,kCAAkC;CAAG;AAArC,kCAAkC;IAT9C,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,oHAAyC;SAC1C;QACD,YAAY,EAAE,CAAC,6FAA4B,CAAC;KAC7C,CAAC;GACW,kCAAkC,CAAG;AAAH;;;;;;;;;;;;;ACnB/C;AAAe,6GAA8C,2LAA2L,E;;;;;;;;;;;;;;;;;;;;;;;;ACAtM;AAEe;AACnB;AAEmC;AACJ;AACpB;AAEC;AAQ1D,IAAa,4BAA4B,GAAzC,MAAa,4BAA4B;IAMvC,YACU,gBAAiC,EACjC,aAA0B,EAC1B,SAAyB,EACzB,OAAqB,EACrB,YAAyB,EACzB,SAA2B,EAC3B,eAA+B;QAN/B,qBAAgB,GAAhB,gBAAgB,CAAiB;QACjC,kBAAa,GAAb,aAAa,CAAa;QAC1B,cAAS,GAAT,SAAS,CAAgB;QACzB,YAAO,GAAP,OAAO,CAAc;QACrB,iBAAY,GAAZ,YAAY,CAAa;QACzB,cAAS,GAAT,SAAS,CAAkB;QAC3B,oBAAe,GAAf,eAAe,CAAgB;QATlC,YAAO,GAAG,EAAE,CAAC;QAYlB,IAAI,CAAC,QAAQ,GAAG,IAAI,yDAAQ,EAAE,CAAC;QAC/B,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,CAAC,SAAS,CAAC,IAAI,GAAE;YAC1D,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,uBAAuB,GAAG,YAAY,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC;QAE9E,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,uBAAuB,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE;YACjG,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBACtB,IAAI,GAAG,GAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;gBACtC,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC;gBAC7B,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACjB,IAAG,GAAG,CAAC,GAAG,IAAI,QAAQ;oBACpB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC3B,CAAC,CAAC,CAAC;YACH,MAAM,CAAC,WAAW,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,eAAe;QACb,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;IAC1B,CAAC;IAED,QAAQ;IACR,CAAC;IAEK,aAAa;;YACjB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACxC,SAAS,EAAE,wFAAkB;gBAC7B,cAAc,EAAE;oBACd,GAAG,EAAC,QAAQ;iBACb;aACF,CAAC,CAAC;YACH,KAAK,CAAC,YAAY,EAAE;iBACnB,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE;gBAChB,IAAG,OAAO,CAAC,IAAI,EAAC;iBAGf;YACH,CAAC,CAAC,CAAC;YACH,OAAO,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;KAAA;IAED,SAAS,CAAC,KAAK;QAEb,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;QAEjC,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;QAEvC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAEvB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAC,CAAC,CAAC,CAAC;QAG7B,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,KAAK,EAAC,CAAC,EAAE,EAAE;YAC3C,IAAG,KAAK,IAAI,SAAS,EAAC;gBACpB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;gBACd,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;gBACrC,OAAO;aACR;QACH,CAAC,CAAC;QAEF,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAEK,cAAc,CAAC,KAAK;;YAExB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,MAAM,EAAE,oCAAoC;gBAC5C,OAAO,EAAE,qCAAqC;gBAC9C,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,UAAU;wBAChB,OAAO,EAAE,CAAC,IAAI,EAAE,EAAE;wBAElB,CAAC;qBACF,EAAE;wBACD,IAAI,EAAE,aAAa;wBACnB,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;wBAExB,CAAC;qBACF;iBACF;aACF,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;KAAA;IAED,OAAO;QACL,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC5C,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC9C,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;CACF;;YA/G4B,4EAAgB;YACnB,oEAAY;YAChB,8DAAe;YACjB,4DAAa;YACR,oEAAY;YACd,uEAAgB;YACX,8DAAe;;AAb9B,4BAA4B;IALxC,+DAAS,CAAC;QACT,QAAQ,EAAE,gCAAgC;QAC1C,gRAAqD;;KAEtD,CAAC;GACW,4BAA4B,CAsHxC;AAtHwC","file":"form-pedidos-configuracion-form-pedidos-configuracion-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Configurar Pedidos</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n\\n  <ion-item>\\n    <ion-label>Habilitar Pedidos</ion-label>\\n    <ion-toggle [(ngModel)]=\\\"comercio.recibirPedidos\\\" (ionChange)=\\\"update()\\\"  [ngModelOptions]=\\\"{standalone: true}\\\"></ion-toggle>\\n  </ion-item>\\n  <ion-item  class=\\\"item-card\\\" *ngIf=\\\"comercio.recibirPedidos\\\">\\n    <ion-button  size=\\\"large\\\" (click)=\\\"agregarCadete()\\\"  expand=\\\"block\\\">Agregar Cadete *</ion-button>\\n  </ion-item>\\n  \\n  <div *ngIf=\\\"comercio.recibirPedidos\\\">\\n    <ion-item-sliding *ngFor=\\\"let cadete of cadetes;let i= index\\\" class=\\\"item-card\\\" >    \\n      <ion-item>\\n        <div slot=\\\"start\\\">\\n          <ion-icon name=\\\"person-outline\\\"></ion-icon>\\n        </div>   \\n        <ion-label>\\n          <h3>{{cadete.userEmail}}</h3>\\n          <p>Estado invitacion: \\n            <span *ngIf=\\\"cadete.estado == 'pendiente'\\\" style=\\\"color:blue\\\">{{cadete.estado}}</span>\\n            <span *ngIf=\\\"cadete.estado == 'aceptado'\\\" style=\\\"color:green\\\">{{cadete.estado}}</span>\\n            <span *ngIf=\\\"cadete.estado == 'rechazado'\\\" style=\\\"color:red\\\">{{cadete.estado}}</span>\\n           </p>\\n        </ion-label>            \\n      </ion-item>\\n      <ion-item-options side=\\\"end\\\">\\n        <ion-item-option (click)=\\\"eliminarCadete(i)\\\"><ion-icon name=\\\"trash\\\" ></ion-icon>Destituir</ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FormPedidosConfiguracionPage } from './form-pedidos-configuracion.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FormPedidosConfiguracionPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FormPedidosConfiguracionPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FormPedidosConfiguracionPageRoutingModule } from './form-pedidos-configuracion-routing.module';\n\nimport { FormPedidosConfiguracionPage } from './form-pedidos-configuracion.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    FormPedidosConfiguracionPageRoutingModule\n  ],\n  declarations: [FormPedidosConfiguracionPage]\n})\nexport class FormPedidosConfiguracionPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm0tcGVkaWRvcy1jb25maWd1cmFjaW9uL2Zvcm0tcGVkaWRvcy1jb25maWd1cmFjaW9uLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { ComerciosService } from '../Services/comercios.service';\r\nimport { Comercio } from '../models/comercio';\r\nimport { SelectEmpleadoPage } from '../select-empleado/select-empleado.page';\r\nimport { ModalController, NavController, AlertController } from '@ionic/angular';\r\nimport { FormInvitacionPage } from '../form-invitacion/form-invitacion.page';\r\nimport { RolesService } from '../Services/roles.service';\r\nimport { UsuariosService } from '../Services/usuarios.service';\r\nimport { AngularFirestore } from 'angularfire2/firestore';\r\nimport { Rol } from '../models/rol';\r\n\r\n@Component({\r\n  selector: 'app-form-pedidos-configuracion',\r\n  templateUrl: './form-pedidos-configuracion.page.html',\r\n  styleUrls: ['./form-pedidos-configuracion.page.scss'],\r\n})\r\nexport class FormPedidosConfiguracionPage implements OnInit {\r\n\r\n  private subs:Subscription;\r\n  public comercio:Comercio;\r\n  public cadetes = [];\r\n\r\n  constructor(\r\n    private comerciosService:ComerciosService,\r\n    private rolesServices:RolesService,\r\n    private modalCtrl:ModalController,\r\n    private navCtrl:NavController,\r\n    private rolesService:RolesService,\r\n    private firestore: AngularFirestore,\r\n    private alertController:AlertController,\r\n  ) { \r\n\r\n    this.comercio = new Comercio();\r\n    this.comerciosService.getSelectedCommerce().subscribe(data=>{\r\n      this.comercio.asignarValores(data);\r\n    });\r\n\r\n    let comercio_seleccionadoId = localStorage.getItem('comercio_seleccionadoId'); \r\n\r\n    var rolSub = this.rolesService.getAllRolesbyComercio(comercio_seleccionadoId).subscribe(snapshot =>{          \r\n      snapshot.forEach(snap =>{\r\n        var rol:any = snap.payload.doc.data();\r\n        rol.id = snap.payload.doc.id;\r\n        console.log(rol);   \r\n        if(rol.rol == \"cadete\") \r\n          this.cadetes.push(rol); \r\n      });      \r\n      rolSub.unsubscribe();\r\n    });\r\n\r\n  }\r\n\r\n  ionViewDidLeave(){\r\n    this.subs.unsubscribe();\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async agregarCadete(){\r\n    const modal = await this.modalCtrl.create({\r\n      component: FormInvitacionPage,\r\n      componentProps: {\r\n        rol:\"cadete\"      \r\n      }\r\n    });\r\n    modal.onDidDismiss()\r\n    .then((retorno) => {\r\n      if(retorno.data){     \r\n        \r\n        \r\n      }        \r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  eliminarC(index){  \r\n  \r\n    console.log(\"Eliminando Cadete\");\r\n\r\n    let idABorrar = this.cadetes[index].id;\r\n\r\n    console.log(idABorrar);\r\n\r\n    this.rolesServices.delete(this.cadetes[index].id);    \r\n    this.cadetes.splice(index,1);\r\n\r\n    \r\n    this.comercio.rolCadetes.forEach((rolId,i) =>{\r\n      if(rolId == idABorrar){\r\n        console.log(i)\r\n        this.comercio.rolCadetes.splice(i,1);\r\n        return;\r\n      }\r\n    })\r\n    \r\n    this.update();\r\n  }\r\n\r\n  async eliminarCadete(index){\r\n\r\n    const alert = await this.alertController.create({\r\n      header: 'Está seguro que desea desvincular?',\r\n      message: 'Se perderán los registros del mismo',\r\n      buttons: [\r\n        {\r\n          text: 'Cancelar',\r\n          handler: (blah) => {\r\n            \r\n          }\r\n        }, {\r\n          text: 'Desvincular',\r\n          handler: () => {  \r\n            this.eliminarC(index);  \r\n                 \r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();    \r\n  }\r\n\r\n  guardar(){\r\n    this.comerciosService.update(this.comercio);\r\n    this.navCtrl.back();\r\n  }\r\n\r\n  update(){\r\n    this.comerciosService.update(this.comercio);\r\n  }\r\n\r\n  cancelar(){\r\n    this.navCtrl.back();\r\n  }\r\n}"],"sourceRoot":"webpack:///"}