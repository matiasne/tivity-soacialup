{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,stCAAupC,YAAY,wLAAwL,aAAa,iDAAiD,cAAc,6YAA6Y,E;;;;;;;;;;;;;;;;;;;ACA1xD;AACc;AAEhB;AAEvC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,mDAAQ;KACpB;CACF,CAAC;AAMF,IAAa,qBAAqB,GAAlC,MAAa,qBAAqB;CAAG;AAAxB,qBAAqB;IAJjC,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;AChBO;AACM;AACF;AAEA;AAEiB;AAEvB;AAC4B;AAYnE,IAAa,cAAc,GAA3B,MAAa,cAAc;CAAG;AAAjB,cAAc;IAV1B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,8EAAgB;YAChB,0DAAW;YACX,0DAAW;YACX,0EAAqB;SACtB;QACD,YAAY,EAAE,CAAC,mDAAQ,CAAC;KACzB,CAAC;GACW,cAAc,CAAG;AAAH;;;;;;;;;;;;;ACrB3B;AAAe,6GAA8C,mIAAmI,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA9I;AACe;AACU;AACC;AACnC;AACgB;AAEI;AAIE;AACN;AACc;AAOH;AAClB;AAQlD,IAAa,QAAQ,GAArB,MAAa,QAAQ;IAgBnB,YACS,WAAiC,EACjC,gBAAiC,EACjC,YAAyB,EACzB,MAAa,EACb,cAA6B,EAC7B,eAA+B,EAC/B,eAA+B,EAC/B,qBAA2C,EAC3C,YAAyB,EACxB,SAAyB,EACzB,QAAkB;QAVnB,gBAAW,GAAX,WAAW,CAAsB;QACjC,qBAAgB,GAAhB,gBAAgB,CAAiB;QACjC,iBAAY,GAAZ,YAAY,CAAa;QACzB,WAAM,GAAN,MAAM,CAAO;QACb,mBAAc,GAAd,cAAc,CAAe;QAC7B,oBAAe,GAAf,eAAe,CAAgB;QAC/B,oBAAe,GAAf,eAAe,CAAgB;QAC/B,0BAAqB,GAArB,qBAAqB,CAAsB;QAC3C,iBAAY,GAAZ,YAAY,CAAa;QACxB,cAAS,GAAT,SAAS,CAAgB;QACzB,aAAQ,GAAR,QAAQ,CAAU;QAzBrB,cAAS,GAAG,EAAE,CAAC;QAIf,mBAAc,GAAG,SAAS,CAAC;QAE3B,4BAAuB,GAAG,IAAI,CAAC;QAI/B,sBAAiB,GAAG,IAAI,CAAC;QAkB9B,IAAI,CAAC,IAAI,GAAG,IAAI,kDAAI,EAAE;QAEtB,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,qBAAqB,CAAC,EAAE,EAAE,GAAG,EAAE;YACtD,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;IAEL,CAAC;IAGD,QAAQ;IAER,CAAC;IAEK,SAAS;;YACb,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACtB,+DAA+D;YAE7D,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAC9B,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACpB,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;YAEhC,IAAI,KAAK,GAAO,MAAM,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE,CAAC;YAClH,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;YAChB,KAAI,IAAI,CAAC,GAAG,CAAC,EAAC,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC;gBAElC,IAAG,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,EAAC;oBACrB,IAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,WAAW,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,WAAW,EAAC;wBAClE,IAAI,GAAG,GAAE,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,IAAI,GAAE;4BACtE,IAAG,IAAI,EAAC;gCACN,IAAI,CAAC,iBAAiB,GAAG,KAAK;gCAC9B,IAAI,QAAQ,GAAO,IAAI,CAAC;gCACxB,QAAQ,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;gCACxB,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;gCACrB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC;gCAC7B,GAAG,CAAC,WAAW,EAAE;6BAClB;wBAEH,CAAC,CAAC,CAAC;qBACJ;iBACF;aACF;YACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;QAC7B,CAAC;KAAA;IAGG,aAAa;;YACjB,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;QACjD,CAAC;KAAA;IAGD,OAAO,CAAC,KAAK;QACX,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;QACrC,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,SAAS,EAAE,CAAC;YACf,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QAC1B,CAAC,EAAE,GAAG,CAAC,CAAC;IACZ,CAAC;IAED,eAAe;QACb,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;IAKD,eAAe;IACf,CAAC;IAGD,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;IACnC,CAAC;IAGK,aAAa;;YACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;YAG7C,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,wDAAU,CAAC,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAC;gBAChE,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBAC7B,OAAO;aACR;YAGD,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACxC,SAAS,EAAE,mFAAgB;gBAC3B,cAAc,EAAC,SAAS;aACzB,CAAC,CAAC;YACH,KAAK,CAAC,YAAY,EAAE;iBACnB,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE;gBAChB,IAAI,CAAC,SAAS,EAAE;YAClB,CAAC,CAAC,CAAC;YACH,OAAO,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;KAAA;IAGK,qBAAqB;;YACzB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACxC,SAAS,EAAE,gFAAe;gBAC1B,cAAc,EAAC,SAAS;aACzB,CAAC,CAAC;YACH,OAAO,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;KAAA;IAED,WAAW,CAAC,QAAQ;QAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;QAC7C,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACvD,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACtC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,oBAAoB,EAAC,EAAC,EAAE,EAAC,QAAQ,CAAC,EAAE,EAAC,CAAC,CAAC,CAAC;QAC9D,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,EAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;IAE9F,CAAC;CAKA;;YAjIoB,sFAAqB;YAChB,4EAAgB;YACpB,oEAAY;YAClB,sDAAM;YACE,wEAAc;YACb,8DAAe;YACf,0EAAe;YACT,sFAAqB;YAC9B,oEAAY;YACd,8DAAe;YACf,uDAAQ;;AA3BjB,QAAQ;IALpB,+DAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,8MAA+B;;KAEhC,CAAC;GACW,QAAQ,CAkJlB;AAlJkB","file":"home-home-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons>    \\n    <ion-title>Home</ion-title>    \\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"refresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n  <div *ngIf=\\\"buscandoComercios\\\" class=\\\"mensaje FadeOut FadeIn\\\">\\n    <img src=\\\"../../assets/img/buscando.fw.png\\\" alt=\\\"\\\">\\n    <p>Cargando comercios, aguarde unos segundos por favor</p>\\n  </div>\\n\\n  <div *ngIf=\\\"!buscandoComercios && comercios.length == 0\\\" class=\\\"mensaje FadeOut FadeIn\\\">\\n    <img src=\\\"../../assets/img/comercio.fw.png\\\" alt=\\\"\\\">\\n    <p>AÃºn no tienes comercios! Agregar uno nuevo</p>\\n  </div>\\n  \\n\\n  <ion-list lines=\\\"none\\\">     \\n    <ion-grid>\\n      <ion-row>\\n        <ion-col size=\\\"6\\\" size-xs=\\\"6\\\" size-sm=\\\"6\\\" size-md=\\\"4\\\" size-lg=\\\"3\\\" *ngFor=\\\"let item of comercios\\\" >\\n          <ion-card class=\\\"FadeOut FadeIn\\\" (click)=\\\"seleccionar(item)\\\">\\n            <img *ngIf=\\\"item.icono.url !=''\\\" width=\\\"500px\\\" src=\\\"{{item.icono}}\\\"/>\\n            <img *ngIf=\\\"item.icono.url == ''\\\" width=\\\"500px\\\" src=\\\"../../assets/img/empty-image.fw.png\\\"/>\\n            <ion-card-content text-center>\\n              <h2><b>{{item.nombre}}</b> </h2>\\n              <p>\\n                {{item.rol.rol}}\\n              </p>  \\n            </ion-card-content>\\n          </ion-card>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>   \\n  </ion-list>\\n  <ion-fab *ngIf=\\\"!buscandoComercios\\\"  vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" (click)=\\\"nuevoComercio()\\\">\\n    <ion-fab-button>\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab> \\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\nimport { HomePage } from './home.page';\nimport { ComponentsModule } from '../Components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ComponentsModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ComerciosService } from '../Services/comercios.service';\r\nimport { AuthenticationService } from '../Services/authentication.service';\r\nimport { ModalController, AlertController, Platform } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport { RolesService } from '../Services/roles.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { LoadingService } from '../Services/loading.service';\r\nimport { NotificacionesDesktopService } from '../Services/notificaciones-desktop.service';\r\nimport { NotificacionesService } from '../Services/notificaciones.service';\r\nimport { PresenceService } from '../Services/presence.service';\r\nimport { UsuariosService } from '../Services/usuarios.service';\r\nimport { ToastService } from '../Services/toast.service';\r\nimport { FormComercioPage } from '../form-comercio/form-comercio.page';\r\nimport { BluetoothSerial } from '@ionic-native/bluetooth-serial/ngx';\r\nimport { ImpresoraService } from '../Services/impresora.service';\r\nimport { WoocommerceService } from '../Services/woocommerce/woocommerce.service';\r\nimport { FotoService } from '../Services/fotos.service';\r\nimport { Archivo } from '../models/foto';\r\nimport { ImagesService } from '../Services/images.service';\r\nimport { CambiarPlanPage } from '../cambiar-plan/cambiar-plan.page';\r\nimport { EnumPlanes, User } from '../models/user';\r\n\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.page.html',\r\n  styleUrls: ['./home.page.scss'],\r\n})\r\nexport class HomePage implements OnInit {\r\n\r\n  public comercios = [];\r\n  public subsItems: Subscription;\r\n  public comercioSubs:Subscription;\r\n\r\n  public conexionEstado = \"offline\";\r\n\r\n  public habilitadoCrearComercio = true;\r\n\r\n  foto:any\r\n\r\n  public buscandoComercios = true;\r\n\r\n  public user:User\r\n\r\n  constructor(\r\n    public authService:AuthenticationService,\r\n    public comerciosService:ComerciosService,\r\n    public rolesService:RolesService,\r\n    public router:Router,\r\n    public loadingService:LoadingService,\r\n    public alertController:AlertController,\r\n    public usuariosService:UsuariosService,\r\n    public AuthenticationService:AuthenticationService,\r\n    public toastService:ToastService,\r\n    private modalCtrl:ModalController,\r\n    private platform: Platform\r\n  ) { \r\n     \r\n    this.user = new User()\r\n\r\n    this.platform.backButton.subscribeWithPriority(10, () => {\r\n      console.log('Handler was called!');\r\n    });\r\n\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n\r\n  } \r\n\r\n  async refrescar(){\r\n    this.comercios = [];\r\n  //  this.user.asignarValores(this.authService.getActualUser());\r\n\r\n    this.buscandoComercios = true;\r\n    this.comercios = [];\r\n    console.log(\"!entrando a home\"); \r\n    \r\n    let roles:any = await this.rolesService.getAllRolesbyEmailGET(this.authService.getActualUser().email).toPromise();\r\n    console.log(roles)\r\n      for(let i = 0;i < roles.length; i++){\r\n        \r\n        if(roles[i].comercioId){\r\n          if(roles[i].estado != \"pendiente\" && roles[i].estado != \"rechazada\"){\r\n            let obs =this.comerciosService.get(roles[i].comercioId).subscribe(data=>{\r\n              if(data){\r\n                this.buscandoComercios = false\r\n                let comercio:any = data;\r\n                comercio.rol = roles[i];\r\n                console.log(comercio)\r\n                this.comercios.push(comercio)\r\n                obs.unsubscribe()\r\n              }\r\n              \r\n            });            \r\n          }\r\n        }\r\n      }\r\n      console.log(this.comercios) \r\n    }\r\n  \r\n \r\n  async getAfipStatus(){\r\n    console.log('Este es el estado del servidor:');\r\n  }\r\n\r\n\r\n  refresh(event) {\r\n    console.log('Begin async operation');\r\n    setTimeout(() => {\r\n      this.refrescar();\r\n        event.target.complete();\r\n      }, 500);\r\n  }\r\n\r\n  ionViewDidEnter(){    \r\n    this.refrescar();\r\n  }\r\n\r\n\r\n  \r\n\r\n  ionViewDidLeave(){\r\n  }\r\n    \r\n\r\n  imprimir(){\r\n    this.router.navigate(['prueba']); \r\n  }\r\n  \r\n\r\n  async nuevoComercio(){\r\n    this.user = this.authService.getActualUser();\r\n\r\n\r\n    if(this.user.plan == EnumPlanes.free && this.comercios.length > 0){\r\n      this.mostrartCambiarDePlan();\r\n      return;      \r\n    }\r\n   \r\n\r\n    const modal = await this.modalCtrl.create({\r\n      component: FormComercioPage,\r\n      componentProps:undefined\r\n    });\r\n    modal.onDidDismiss()\r\n    .then((retorno) => {  \r\n      this.refrescar()\r\n    });\r\n    return await modal.present();      \r\n  }\r\n\r\n\r\n  async mostrartCambiarDePlan(){\r\n    const modal = await this.modalCtrl.create({\r\n      component: CambiarPlanPage,\r\n      componentProps:undefined\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  seleccionar(comercio){\r\n    this.user = this.authService.getActualUser();    \r\n    this.comerciosService.setSelectedCommerce(comercio.id);   \r\n    this.authService.setRol(comercio.rol);\r\n    this.router.navigate(['dashboard-comercio',{id:comercio.id}]);\r\n    this.usuariosService.setComecioSeleccionado(this.authService.getActualUserId(),comercio.id);\r\n       \r\n  }\r\n\r\n\r\n  \r\n\r\n  }\r\n"],"sourceRoot":"webpack:///"}