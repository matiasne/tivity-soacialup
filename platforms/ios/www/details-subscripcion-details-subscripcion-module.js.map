{"version":3,"sources":["./src/app/details-subscripcion/details-subscripcion.page.html","./src/app/Services/pagares.service.ts","./src/app/details-subscripcion/details-subscripcion-routing.module.ts","./src/app/details-subscripcion/details-subscripcion.module.ts","./src/app/details-subscripcion/details-subscripcion.page.scss","./src/app/details-subscripcion/details-subscripcion.page.ts","./src/app/models/servicio.ts"],"names":[],"mappings":"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","file":"details-subscripcion-details-subscripcion-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Detalle Subscripci√≥n</ion-title>    \\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <app-card-subscription [item]=\\\"subscripcion\\\"></app-card-subscription>\\n  <ion-item *ngFor=\\\"let pagare of pagares\\\">\\n    <ion-label>\\n      {{pagare.createdAt | date:'dd/MM/yyyy'}} {{pagare.monto | currency}} \\n    </ion-label>\\n    \\n\\n      <ion-button  slot=\\\"end\\\" *ngIf=\\\"pagare.estado == 'debe'\\\" size=\\\"large\\\"  (click)=\\\"cobrar(pagare)\\\"  expand=\\\"block\\\">Cobrar</ion-button>\\n\\n  </ion-item>\\n</ion-content>\\n\";","import { Injectable } from '@angular/core';\nimport { AngularFirestore } from 'angularfire2/firestore';\nimport { ClientesService } from './clientes.service';\nimport { ServiciosService } from './servicios.service';\nimport * as firebase from 'firebase';\nimport { Pagare } from '../models/pagare';\nimport { BaseService } from './base.service';\nimport { ComerciosService } from './comercios.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PagaresService extends BaseService{\n\n  private subsId = \"\";\n  private comercioId=\"\"\n  constructor(\n    protected afs: AngularFirestore,\n    private comerciosService:ComerciosService\n    ) {     \n      super(afs); \n      this.comerciosService.getSelectedCommerce().subscribe(data=>{\n        // let comercio_seleccionadoId = localStorage.getItem('comercio_seleccionadoId'); \n        if(data){\n         this.comercioId = data.id\n         }\n        \n      })\n  }\n\n\n  setSubsId(id){\n    this.subsId = id;\n    console.log(\"comercios/\"+this.comercioId+\"/subscripciones/\"+this.subsId+\"/pagares\")\n    this.setPath(\"comercios/\"+this.comercioId+\"/subscripciones/\"+this.subsId+\"/pagares\");\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DetailsSubscripcionPage } from './details-subscripcion.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailsSubscripcionPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DetailsSubscripcionPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailsSubscripcionPageRoutingModule } from './details-subscripcion-routing.module';\n\nimport { DetailsSubscripcionPage } from './details-subscripcion.page';\nimport { ComponentsModule } from '../Components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ComponentsModule,\n    FormsModule,\n    IonicModule,\n    DetailsSubscripcionPageRoutingModule\n  ],\n  declarations: [DetailsSubscripcionPage]\n})\nexport class DetailsSubscripcionPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2RldGFpbHMtc3Vic2NyaXBjaW9uL2RldGFpbHMtc3Vic2NyaXBjaW9uLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { SubscripcionesService } from '../Services/subscripciones.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscripcion } from '../models/subscripcion';\nimport { Cliente } from '../models/cliente';\nimport { Servicio } from '../models/servicio';\nimport { PagaresService } from '../Services/pagares.service';\n\n@Component({\n  selector: 'app-details-subscripcion',\n  templateUrl: './details-subscripcion.page.html',\n  styleUrls: ['./details-subscripcion.page.scss'],\n})\nexport class DetailsSubscripcionPage implements OnInit {\n\n  public subscripcion:Subscripcion; \n  public cliente:Cliente;\n  public servicio:Servicio;\n  public pagares = [];\n  constructor(\n    private route: ActivatedRoute,\n    private subscripcionesService:SubscripcionesService,\n    private pagaresService:PagaresService,\n  ) { \n    this.subscripcion = new Subscripcion(\"\",\"\");\n    this.cliente = new Cliente();\n    this.servicio = new Servicio();\n  }\n\n  ngOnInit() {\n\n    this.subscripcionesService.get(this.route.snapshot.params.id).subscribe(data=>{\n      console.log(data);\n      this.subscripcion.asignarValores(data);\n               \n      this.subscripcion.clienteRef.get().then(snap=>{\n        this.subscripcion[\"cliente\"].nombre = snap.data().nombre;\n      });\n\n      this.subscripcion.servicioRef.get().then(snap=>{\n        if(snap)\n          this.subscripcion[\"servicio\"].nombre = snap.data().nombre;\n      });\n    \n      if(this.subscripcion.planRef){\n        this.subscripcion.planRef.get().then(snap=>{\n          if(snap){ \n            this.subscripcion['plan'].nombre = snap.data().nombre;\n            this.subscripcion['plan'].precio = snap.data().precio;\n          }\n          \n        });\n      }\n      else{\n        this.subscripcion['plan'] = {\n          precio: this.subscripcion.precio,\n          tipo:this.subscripcion.tipo,\n          dias:this.subscripcion.dias,\n          nombre: \"Personalizado\"\n        }\n      }\n     \n\n      let fechaActual = new Date();\n      let fechaAMesActual = new Date(this.subscripcion.fechaInicio);\n      fechaAMesActual.setMonth(fechaActual.getMonth());\n\n      if(fechaActual > fechaAMesActual){\n        fechaAMesActual.setMonth(fechaActual.getMonth()+1);\n      }\n\n      let fechaProximoPago = fechaAMesActual;\n      this.subscripcion.proximoPago = fechaProximoPago;\n\n      console.log(fechaProximoPago);\n\n    })  \n\n    this.pagaresService.setSubsId(this.route.snapshot.params.id);\n    this.pagaresService.list().subscribe(data =>{\n      console.log(data)\n      this.pagares = data;\n    })\n    \n\n  }\n\n  cobrar(pagare){\n \n  }\n\n}\n","import { Plan } from './plan';\r\n\r\nexport class Servicio {\r\n\r\n    id=\"\";\r\n    plan = {\r\n        id:\"\",\r\n        nombre:\"\",\r\n        precio:0,\r\n        tipo:\"\", \r\n        dias:\"\"\r\n    }\r\n    nombre =\"\";\r\n    descripcion=\"\";\r\n    categorias=[];\r\n    profesionales=[];\r\n    foto=\"\";\r\n    createdAt=\"\";\r\n    fechaInicio =\"\";\r\n    pagoAdelantado= \"true\" ;\r\n    descripcion_venta=\"\";\r\n    recibirReservas=true;\r\n\r\n    precio=0;\r\n    tipo=\"\";\r\n    dias=\"\";\r\n\r\n\tpublic constructor() {\r\n    }\r\n\r\n    public asignarValores(init?: Partial<Servicio>) {\r\n        Object.assign(this, init);\r\n    }\r\n    \r\n    \r\n}"],"sourceRoot":"webpack:///"}