{"version":3,"sources":["./src/app/form-cierre-caja/form-cierre-caja.page.html","./src/app/Services/clientes.service.ts","./src/app/Services/keyword.service.ts","./src/app/form-cierre-caja/form-cierre-caja-routing.module.ts","./src/app/form-cierre-caja/form-cierre-caja.module.ts","./src/app/form-cierre-caja/form-cierre-caja.page.scss","./src/app/form-cierre-caja/form-cierre-caja.page.ts"],"names":[],"mappings":"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","file":"form-cierre-caja-form-cierre-caja-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title  size=\\\"small\\\">Cierre de caja</ion-title>    \\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content  class=\\\"ion-padding\\\"> \\n\\n  <div class=\\\"form-card\\\">\\n    <ion-text color=\\\"primary\\\">\\n      <h4>Fecha de Cierre </h4> \\n    </ion-text>             \\n    {{fecha | date: 'dd/MM/yyyy h:mm a'}}\\n  </div> \\n \\n  <ion-text color=\\\"primary\\\">\\n    <h4>Total Efectivo {{caja.totalEfectivo | currency}}</h4>\\n  </ion-text>\\n\\n  <div>\\n    <ion-text color=\\\"primary\\\">\\n      <h4>Extracción Efectivo*</h4> \\n    </ion-text>             \\n    <ion-item>\\n      <ion-input name=\\\"extraccion\\\" type=\\\"number\\\" [(ngModel)]=\\\"extraccionEfectivo\\\" required></ion-input>\\n    </ion-item>    \\n  </div>\\n\\n  <ion-text color=\\\"primary\\\">\\n    <h4>Total Debito {{caja.totalDebito | currency}}</h4>\\n  </ion-text>\\n\\n  <div>\\n    <ion-text color=\\\"primary\\\">\\n      <h4>Extracción Débito*</h4> \\n    </ion-text>            \\n    <ion-item>\\n      <ion-input name=\\\"extraccion\\\" type=\\\"number\\\" [(ngModel)]=\\\"extraccionDebito\\\" required></ion-input>\\n    </ion-item>    \\n  </div>\\n\\n  <ion-text color=\\\"primary\\\">\\n    <h4>Total Credito {{caja.totalCredito | currency}}</h4>\\n  </ion-text>\\n\\n  <div>\\n    <ion-text color=\\\"primary\\\">\\n      <h4>Extracción Crédito*</h4> \\n    </ion-text>            \\n    <ion-item>\\n      <ion-input name=\\\"extraccion\\\" type=\\\"number\\\" [(ngModel)]=\\\"extraccionCredito\\\" required></ion-input>\\n    </ion-item>    \\n  </div>\\n   \\n  \\n\\n  <ion-toolbar>\\n    <ion-button class=\\\"button-rounded\\\" slot=\\\"end\\\" (click)=\\\"cerrar()\\\">Cerrar</ion-button>\\n    \\n    <ion-button class=\\\"button-rounded\\\" slot=\\\"start\\\"  color=\\\"light\\\" (click)=\\\"cancelar()\\\">Cancelar</ion-button>\\n  </ion-toolbar>\\n\\n</ion-content>\";","import { Injectable } from '@angular/core';\nimport { AngularFirestore } from 'angularfire2/firestore';\nimport { firestore } from 'firebase';\nimport { map, subscribeOn } from 'rxjs/operators';\nimport * as firebase from 'firebase';\nimport { Cliente } from '../models/cliente';\nimport { KeywordService } from './keyword.service';\nimport { ComerciosService } from './comercios.service';\nimport { BaseService } from './base.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ClientesService extends BaseService {\n\n  private collectionGroup:string;\n  \n  constructor(\n    protected afs: AngularFirestore,\n    private keywordService:KeywordService,\n    private comerciosService:ComerciosService\n    ) {     \n      super(afs); \n      this.comerciosService.getSelectedCommerce().subscribe(data=>{\n        // let comercio_seleccionadoId = localStorage.getItem('comercio_seleccionadoId'); \n        if(data){         \n          console.log(data.id)\n         this.setPath('comercios/'+data.id+'/clientes')   \n        }\n        \n      })\n      this.collectionGroup ='/clientes';\n  }\n\n\n  public create(data:Cliente) {   \n\n    this.keywordService.agregarKeywords(data, [data.nombre,data.email]);\n   \n    const param = JSON.parse(JSON.stringify(data));\n    return this.afs.collection(this.path).doc(data.id).set({...param,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp()});\n           \n    \n  }\n\n  getByEmail(email){\n    return this.afs.collection(this.path, ref =>  ref.where('email','==',email)).valueChanges();    \n  }\n\n  getByNombre(nombre){\n    return this.afs.collection(this.path, ref =>  ref.where('nombre','==',nombre)).valueChanges();    \n  }\n\n  getRef(id){\n    return this.afs.collection(this.path).doc(id).ref;\n  }\n\n  public getAll() {   \n    return this.afs.collection(this.path).snapshotChanges();\n  }\n  \n  public update(cliente:Cliente) {\n\n    this.keywordService.agregarKeywords(cliente, [cliente.nombre,cliente.email]);\n\n\n    console.log(cliente);\n    const param = JSON.parse(JSON.stringify(cliente));\n    return this.afs.collection(this.path).doc(cliente.id).set({...param,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n    });\n  }\n\n  public delete(data) {\n    //Debo eliminar primero cada subscripción\n    if(data.subscripciones){\n      data.subscripciones.forEach(subscripcion => {\n        this.afs.doc(subscripcion).delete();\n      });\n    }\n    \n    return this.afs.collection(this.path).doc(data.id).delete();    \n  }\n\n  public addCtaCorriente(clienteId,ctaCorrienteId){\n    let param ={\n      ctaId:ctaCorrienteId\n    }\n    this.afs.collection(this.path+'/'+clienteId+'/ctasCorrientes').doc(ctaCorrienteId).set(param)\n  }\n\n  public deleteCtaCorriente(clienteId,ctaCorrienteId){\n    this.afs.collection(this.path+'/'+clienteId+'/ctasCorrientes').doc(ctaCorrienteId).delete();\n  }\n\n  public search(limit,orderBy,palabra,ultimo){      \n    if(ultimo == \"\"){\n      console.log(\"!!!!!! primero\")\n      console.log(palabra)     \n      console.log(orderBy)\n      return this.afs.collection(this.path, ref => \n        ref.where('keywords','array-contains',palabra)\n            .orderBy(orderBy)\n            .limit(limit)).snapshotChanges();\n    }\n    else{\n      console.log(palabra)     \n      console.log(orderBy)\n      return this.afs.collection(this.path, ref => \n        ref.where('keywords','array-contains',palabra)\n            .orderBy(orderBy)\n            .startAfter(ultimo)\n            .limit(limit)).snapshotChanges();    \n    }    \n  }  \n\n  //Esto para ver todos los beneficios o cuestiones del cliente particular en todo el entorno\n  public getAllClientesbyEmail(email) {  \n    return this.afs.collectionGroup(this.collectionGroup, ref => ref.where('email', '==', email)).get(/*{ source: 'server' }*/)\n    .pipe(\n      map(actions => {\n        const data = [];       \n        actions.forEach(a => {\n          const item = a.data() ;\n          item.id = a.id;\n          data.push(item);\n        });\n        return data;\n      })\n    )\n  }\n\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class KeywordService {\n\n  constructor() { }\n\n  public agregarKeywords(objeto,palabras){    \n    objeto.keywords.push('');\n    objeto.keywords.push(' ');\n\n    console.log(palabras)\n    \n    palabras.forEach(palabra => {\n      objeto.keywords.push(palabra);\n      let p = palabra.toLowerCase().split(\" \");\n      p.forEach(element => {\n        objeto.keywords = objeto.keywords.concat(this.createKeywords(element));\n      });\n    });\n    \n    \n  }\n\n  private createKeywords(name){\n    const arrName = [];\n    let curName = '';\n    \n    name.split('').forEach(letter => {\n      curName += letter;\n      arrName.push(curName);\n    });\n    return arrName;\n  }\n  \n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FormCierreCajaPage } from './form-cierre-caja.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FormCierreCajaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FormCierreCajaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FormCierreCajaPageRoutingModule } from './form-cierre-caja-routing.module';\n\nimport { FormCierreCajaPage } from './form-cierre-caja.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    FormCierreCajaPageRoutingModule\n  ],\n  declarations: [FormCierreCajaPage]\n})\nexport class FormCierreCajaPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm0tY2llcnJlLWNhamEvZm9ybS1jaWVycmUtY2FqYS5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { ActivatedRoute } from '@angular/router';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { AuthenticationService } from '../Services/authentication.service';\nimport { CajasService } from '../Services/cajas.service';\nimport { Caja } from '../models/caja';\nimport { EnumTipoMovimientoCaja, MovimientoCaja } from '../models/movimientoCaja';\nimport { MovimientosService } from '../Services/movimientos.service';\nimport { AngularFirestore } from 'angularfire2/firestore';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-form-cierre-caja',\n  templateUrl: './form-cierre-caja.page.html',\n  styleUrls: ['./form-cierre-caja.page.scss'],\n})\nexport class FormCierreCajaPage implements OnInit {\n\n  private enumTipoMovimientoCaja = EnumTipoMovimientoCaja\n  \n  public datosForm: FormGroup;  \n  public fecha = new Date();\n  public cajaId = \"\";\n  submitted = false;\n  public totalActual=0;\n  public caja:Caja;\n\n  public extraccionEfectivo = 0;\n  public extraccionDebito = 0;\n  public extraccionCredito = 0;\n\n  public movSub:Subscription;\n  \n  constructor(\n    private formBuilder: FormBuilder,\n    private navCtrl: NavController,\n    private route: ActivatedRoute,\n    private authenticationService:AuthenticationService,\n    private cajasServices:CajasService,\n    private movimientosService:MovimientosService,\n    private firestore: AngularFirestore,\n    private cajasService:CajasService\n  ) { \n    this.fecha = new Date();\n    this.caja = new Caja();\n\n    let comercio_seleccionadoId = localStorage.getItem('comercio_seleccionadoId');\n    this.movSub = this.cajasServices.get(this.route.snapshot.params.cajaId).subscribe(data =>{\n      this.caja.asignarValores(data)\n    })\n\n\n    \n  }\n\n  ngOnInit() { \n\n    //Cada caja puede extraer el efectivo y dejar el debito o el credito o retirar solo esos tickets\n  }\n\n  ionViewDidLeave(){\n    this.movSub.unsubscribe();\n  }\n\n  get f() { return this.datosForm.controls; }\n\n  cerrar(){\n    this.submitted = true;\n\n    console.log(this.extraccionEfectivo +\" \"+this.caja.totalEfectivo)\n    if(this.extraccionEfectivo > this.caja.totalEfectivo){\n      alert(\"La extracción en Efectivo es mayor que el monto actual\");\n      return;\n    }\n\n    if(this.extraccionCredito > this.caja.totalCredito){\n      alert(\"La extracción en Crédito es mayor que el monto actual\");\n      return;\n    }\n\n    if(this.extraccionDebito > this.caja.totalDebito){\n      alert(\"La extracción en Débito es mayor que el monto actual\");\n      return;\n    }\n\n    this.caja.estado = \"cerrada\";\n\n    this.actualizarMontosCaja()\n\n    this.movimientosService.setearPath(this.caja.id)\n\n    this.movimientosService.agregarMovimientoCaja(\n      this.caja.id,\"\",\n      this.enumTipoMovimientoCaja.cierre,\n      \"\",\n      \"efectivo\", \n      -this.extraccionEfectivo,\n      \"Cierre De Caja Efectivo\",\n      )\n\n    this.movimientosService.agregarMovimientoCaja(\n      this.caja.id,\"\",\n      this.enumTipoMovimientoCaja.cierre,\n      \"\",\n      \"debito\", \n      -this.extraccionEfectivo,\n      \"Cierre De Caja Débito\",\n      )\n    \n    this.movimientosService.agregarMovimientoCaja(\n      this.caja.id,\"\",\n      this.enumTipoMovimientoCaja.cierre,\n      \"\",\n      \"credito\", \n      -this.extraccionEfectivo,\n      \"Cierre De Caja Crédito\",\n      )\n\n\n\n    \n    this.navCtrl.back();\n  }\n\n  cancelar(){\n    this.navCtrl.back();\n  }\n\n  actualizarMontosCaja(){\n      this.caja.totalEfectivo = Number(this.caja.totalEfectivo)- Number(this.extraccionEfectivo);\n   \n      this.caja.totalCredito = Number(this.caja.totalCredito)- Number(this.extraccionCredito);\n    \n      this.caja.totalDebito = Number(this.caja.totalDebito) - Number(this.extraccionDebito);\n    \n\n    const param1 = JSON.parse(JSON.stringify(this.caja));\n    this.cajasService.update(param1);\n  }\n\n}\n"],"sourceRoot":"webpack:///"}