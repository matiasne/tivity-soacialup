{"version":3,"sources":["./src/app/list-cajas/list-cajas.page.html","./src/app/Services/cajas.service.ts","./src/app/list-cajas/list-cajas-routing.module.ts","./src/app/list-cajas/list-cajas.module.ts","./src/app/list-cajas/list-cajas.page.scss","./src/app/list-cajas/list-cajas.page.ts"],"names":[],"mappings":"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","file":"list-cajas-list-cajas-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title  size=\\\"small\\\">Cajas</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  \\n  \\n  <div *ngIf=\\\"buscando\\\" class=\\\"mensaje FadeOut FadeIn\\\">\\n    <img src=\\\"../../assets/img/buscando.fw.png\\\" alt=\\\"\\\">\\n    <p>Cargando cajas, aguarde unos segundos por favor</p>\\n  </div>\\n\\n  <div *ngIf=\\\"!buscando && cajas.length == 0\\\" class=\\\"mensaje FadeOut FadeIn\\\">\\n    <img src=\\\"../../assets/img/caja.fw.png\\\" alt=\\\"\\\">\\n    <p>Aún no tienes cajas, agrega una para hacer un seguimiento de tus egresos e ingresos.</p><br>\\n    <ion-button class=\\\"button-rounded\\\"  color=\\\"primary\\\" (click)=\\\"openAddCaja()\\\">Agregar Caja</ion-button>\\n  </div>\\n\\n  <ion-grid *ngIf=\\\"cajas.length > 0\\\">       \\n    <ion-row>          \\n      <ion-col size=\\\"12\\\" size-xs=\\\"12\\\" size-sm=\\\"6\\\" size-md=\\\"4\\\" size-lg=\\\"3\\\" *ngFor=\\\"let caja of cajas\\\">\\n        <ion-item-sliding  class=\\\"item-card\\\">\\n          <ion-item (click)=\\\"seleccionar(caja.id)\\\" class=\\\"remove_inner_bottom\\\">  \\n            <div slot=\\\"start\\\">\\n              <ion-icon name=\\\"file-tray-full-outline\\\"></ion-icon>\\n            </div>      \\n            <ion-label>\\n              <b>{{caja.nombre}}</b>         \\n            </ion-label> \\n            <ion-badge color=\\\"success\\\" *ngIf=\\\"caja.estado == 'abierta'\\\" slot=\\\"end\\\">Abierta</ion-badge>\\n            <ion-badge color=\\\"danger\\\" *ngIf=\\\"caja.estado == 'cerrada'\\\" slot=\\\"end\\\">Cerrada</ion-badge>\\n          </ion-item>  \\n    \\n          \\n    \\n          <ion-item-options side=\\\"end\\\">\\n            <ion-item-option (click)=\\\"openEditCaja(caja)\\\"><ion-icon name=\\\"create\\\" ></ion-icon> Editar</ion-item-option>\\n          </ion-item-options>\\n    \\n        </ion-item-sliding>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n  <ion-list lines=\\\"none\\\">        \\n    \\n      \\n    \\n  </ion-list>\\n\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" (click)=\\\"openAddCaja()\\\">\\n    <ion-fab-button>\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n</ion-content>\\n\";","import { Injectable } from '@angular/core';\nimport { AngularFirestore } from 'angularfire2/firestore';\nimport { Caja } from '../models/caja';\nimport { MovimientoCaja } from '../models/movimientoCaja';\nimport * as firebase from 'firebase';\nimport { CtaCorrientesService } from './cta-corrientes.service';\nimport { MovimientoCtaCorriente } from '../models/movimientoCtaCorriente';\nimport { MaxLengthValidator } from '@angular/forms';\nimport { BaseService } from './base.service';\nimport { ComerciosService } from './comercios.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CajasService extends BaseService{\n\n  constructor(\n    protected afs: AngularFirestore,\n    private comerciosService:ComerciosService\n  ) {     \n    super(afs); \n    \n       this.setPath(this.getPath())   \n    \n     \n  }\n\n  private getPath(){ //esto debe ser así porque puede que cambie de comercio en algun momento usando la app\n    let comercioId = this.comerciosService.getSelectedCommerceId()\n    return 'comercios/'+comercioId+'/cajas'\n  }\n\n\n}\n\n\n  \n\n\n\n  \n  ","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListCajasPage } from './list-cajas.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListCajasPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ListCajasPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListCajasPageRoutingModule } from './list-cajas-routing.module';\n\nimport { ListCajasPage } from './list-cajas.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ListCajasPageRoutingModule\n  ],\n  declarations: [ListCajasPage]\n})\nexport class ListCajasPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2xpc3QtY2FqYXMvbGlzdC1jYWphcy5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { CajasService } from '../Services/cajas.service';\nimport { Subscription } from 'rxjs';\nimport { ModalController } from '@ionic/angular';\nimport { FormCajaPage } from '../form-caja/form-caja.page';\nimport { Router } from '@angular/router';\nimport { LoadingService } from '../Services/loading.service';\nimport { ComerciosService } from '../Services/comercios.service';\nimport { Comercio } from '../models/comercio';\nimport { CambiarPlanPage } from '../cambiar-plan/cambiar-plan.page';\n\n@Component({\n  selector: 'app-list-cajas',\n  templateUrl: './list-cajas.page.html',\n  styleUrls: ['./list-cajas.page.scss'],\n})\nexport class ListCajasPage implements OnInit {\n\n  cajasSubs:Subscription;\n  public cajas =[];\n\n  public buscando = true;\n  public comercio:Comercio\n  \n  constructor(\n    private cajasService:CajasService,\n    private modalCtrl:ModalController,\n    private router:Router,\n    private loadingService:LoadingService,\n    private comercioService:ComerciosService\n  ) { \n    this.comercio = new Comercio()\n    this.comercio.asignarValores(this.comercioService.getSelectedCommerceValue())\n  }\n\n  ngOnInit() {\n    \n   \n\n  }\n\n  ionViewDidEnter(){\n    this.cajasService.setOrderBy(\"nombre\",\"desc\");\n    this.cajasSubs = this.cajasService.list().subscribe((caja:any)=>{        \n      this.cajas = caja;  \n      this.buscando = false;    \n    });\n  }\n\n  ionViewDidLeave(){\n    this.cajasSubs.unsubscribe();\n  }\n\n  seleccionar(cajaId){\n    this.router.navigate(['details-caja',{\n      id: cajaId\n    }]);\n  }\n\n  async openAddCaja(){\n\n    if(this.cajas.length > this.comercio.config.productosMaxLength){\n      let modal = await this.modalCtrl.create({\n        component: CambiarPlanPage,\n        componentProps: {\n          extraText: \"Haz alcanzado el límite de cajas de tu plan: \"+this.comercio.plan,\n          actualPlan:this.comercio.plan\n        }\n      });  \n      return await modal.present();\n    }\n    else{\n      let comercio_seleccionadoId = localStorage.getItem('comercio_seleccionadoId');\n      const modal = await this.modalCtrl.create({\n        component: FormCajaPage,\n        componentProps: { \n          comercioId: comercio_seleccionadoId\n        }\n      });\n\n      return await modal.present();\n    }\n\n    \n  }\n\n  async openEditCaja(item){\n    const modal = await this.modalCtrl.create({\n      component: FormCajaPage,\n      componentProps: { \n        caja: item\n      }\n    });  \n\n    return await modal.present();\n  }\n\n}\n"],"sourceRoot":"webpack:///"}