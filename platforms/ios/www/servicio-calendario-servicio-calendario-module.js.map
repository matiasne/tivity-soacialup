{"version":3,"sources":["./src/app/servicio-calendario/servicio-calendario.page.html","./src/app/servicio-calendario/servicio-calendario-routing.module.ts","./src/app/servicio-calendario/servicio-calendario.module.ts","./src/app/servicio-calendario/servicio-calendario.page.scss","./src/app/servicio-calendario/servicio-calendario.page.ts"],"names":[],"mappings":"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","file":"servicio-calendario-servicio-calendario-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>servicio-calendario</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-button color=\\\"light\\\" (click)=\\\"agregarEspacios()\\\">Agregar Espacios</ion-button>\\n  <full-calendar #fullcalendar deepChangeDetection=\\\"true\\\" [options]=\\\"calendarOptions\\\"></full-calendar>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ServicioCalendarioPage } from './servicio-calendario.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ServicioCalendarioPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ServicioCalendarioPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ServicioCalendarioPageRoutingModule } from './servicio-calendario-routing.module';\n\nimport { ServicioCalendarioPage } from './servicio-calendario.page';\nimport { FullCalendarModule } from '@fullcalendar/angular';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    FullCalendarModule,\n    IonicModule,\n    ServicioCalendarioPageRoutingModule\n  ],\n  declarations: [ServicioCalendarioPage]\n})\nexport class ServicioCalendarioPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NlcnZpY2lvLWNhbGVuZGFyaW8vc2VydmljaW8tY2FsZW5kYXJpby5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { CalendarOptions, EventAddArg, FullCalendarComponent, Calendar, EventInput } from '@fullcalendar/angular'; // useful for typechecking\nimport { Comercio } from '../models/comercio';\nimport { ComerciosService } from '../Services/comercios.service';\nimport { HorariosService } from '../Services/horarios.service';\nimport { Horario } from '../models/horario';\n\n@Component({\n  selector: 'app-servicio-calendario',\n  templateUrl: './servicio-calendario.page.html',\n  styleUrls: ['./servicio-calendario.page.scss'],\n})\nexport class ServicioCalendarioPage implements OnInit {\n\n  @ViewChild(\"fullcalendar\", { static: true })\n  calendarComponent: FullCalendarComponent;\n  \n  eventsCalendar: any[] = [];\n  //used to store initial data\n  events: any[] = [];\n\n  calendarApi: Calendar;\n\n  calendarEvents: EventInput[] = [\n  ];\n\n  initialized = false;\n\n  calendarOptions: CalendarOptions = {\n    headerToolbar: {\n      left: 'dayGridMonth,timeGridWeek,timeGridDay',\n      center: 'title',\n      right: 'prevYear,prev,next,nextYear'\n    },\n    initialView: 'timeGridWeek',\n    slotDuration: '00:15:00',\n    dayHeaderFormat:{ weekday: 'short' },\n    dateClick: this.handleDateClick.bind(this), // bind is important!\n    events: this.events,\n    \n  };\n\n  public horarios = [];\n  \n  constructor(\n    private comerciosService:ComerciosService\n  ) { }\n\n  ngOnInit() {  \n    \n  }\n\n  gotoDate() {\n    //the if condition is to prevent possible error\n    if (this.calendarApi) {\n      this.calendarApi.gotoDate(new Date());\n    }\n  }\n\n  ionViewDidEnter(){\n    this.calendarApi = this.calendarComponent.getApi();\n    if (this.calendarApi && !this.initialized) {\n      this.initialized = true;\n    }\n\n    let comercio_seleccionadoId = localStorage.getItem('comercio_seleccionadoId');\n    console.log(comercio_seleccionadoId)\n    this.comerciosService.get(comercio_seleccionadoId).subscribe(snapshot =>{\n      let com:any = snapshot.payload.data();     \n      com.horarios.forEach((item: any) => {  \n        this.horarios.push(item);    \n        console.log(item);    \n      });\n      console.log(this.horarios);  \n      this.agregarFranjasAbierto();\n    });\n\n    \n  }\n\n  agregarFranjasAbierto(){\n\n    console.log(this.calendarApi.view.currentStart.getTime()+\" \"+this.calendarApi.view.currentEnd.getTime());\n\n    for (let loop = this.calendarApi.view.currentStart.getTime();\n      loop <= this.calendarApi.view.currentEnd.getTime();\n      loop = loop + (24 * 60 * 60 * 1000)) {\n      var test_date = new Date(loop);\n\n      this.horarios.forEach(horario =>{\n        if (test_date.getDay() == horario.dia) {\n          // we're in Moday, create the event\n          let calendarevent = {\n            startEditable: true,\n            id:\"asd\",\n            title: \"titulo\",\n            start: horario.desde,\n            end: horario.hasta,\n            editable: true,\n            display: 'background'\n          };\n      \n          this.calendarEvents =  this.eventsCalendar;\n          this.eventsCalendar.push(calendarevent);\n          this.calendarApi.addEventSource(this.calendarEvents);\n        }\n      })    \n    }\n  }\n\n  handleDateClick(arg) {\n    alert('date click! ' + arg.dateStr)    \n  }\n\n  agregarEspacios(){\n\n    \n  }\n\n  onEventClick(event){\n    console.log(event.param.target)\n  }\n\n\n\n}\n"],"sourceRoot":"webpack:///"}