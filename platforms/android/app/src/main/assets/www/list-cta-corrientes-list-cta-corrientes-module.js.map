{"version":3,"sources":["./src/app/list-cta-corrientes/list-cta-corrientes.page.html","./src/app/Services/cta-corrientes.service.ts","./src/app/list-cta-corrientes/list-cta-corrientes-routing.module.ts","./src/app/list-cta-corrientes/list-cta-corrientes.module.ts","./src/app/list-cta-corrientes/list-cta-corrientes.page.scss","./src/app/list-cta-corrientes/list-cta-corrientes.page.ts","./src/app/models/ctacorriente.ts"],"names":[],"mappings":"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","file":"list-cta-corrientes-list-cta-corrientes-module.js","sourcesContent":["export default \"<ion-header>  \\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Cuentas Corrientes</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding ion-text-wrap\\\"> \\n\\n  <ion-row>\\n    <ion-col size=\\\"10\\\">\\n      <ion-input placeholder=\\\"Buscar\\\" style=\\\"border:1px solid rgb(206, 206, 206); border-radius: 5px;\\\"\\n      [(ngModel)]=\\\"palabraFiltro\\\"\\n      ></ion-input>\\n    </ion-col>\\n    <ion-col size=\\\"2\\\">\\n      <ion-button color=\\\"primary\\\" style=\\\"margin-top: -1px; height: 42px;\\\"  (click)=\\\"buscar()\\\">\\n          <ion-icon name=\\\"search\\\"></ion-icon>\\n      </ion-button>\\n    </ion-col>\\n  </ion-row>\\n\\n  <div *ngIf=\\\"buscando\\\" class=\\\"mensaje FadeOut FadeIn\\\">\\n    <img src=\\\"../../assets/img/buscando.fw.png\\\" alt=\\\"\\\">\\n    <p>Cargando comandas, aguarde unos segundos por favor</p>\\n  </div>\\n\\n  <div *ngIf=\\\"!buscando && itemsView.length == 0\\\" class=\\\"mensaje FadeOut FadeIn\\\">\\n    <img src=\\\"../../assets/img/ctasCorrientes.fw.png\\\" alt=\\\"\\\">\\n    <p>AÃºn no tienes cuentas corrientes.</p>\\n  </div>\\n\\n  <ion-item-sliding *ngFor=\\\"let item of itemsView\\\" class=\\\"item-card\\\">\\n    \\n    <ion-item (click)=\\\"seleccionar(item)\\\">\\n      <div slot=\\\"start\\\">\\n        <ion-icon name=\\\"wallet-outline\\\" *ngIf=\\\"!item.foto\\\"></ion-icon>\\n      </div>      \\n      <ion-label>\\n        <h2><b>{{item.nombre}}</b> {{item.montoTotal | currency}}</h2>         \\n        <p *ngFor=\\\"let cliente of item.clientes\\\">\\n          {{cliente.nombre}} - DNI: {{cliente.documento}}\\n        </p>           \\n      </ion-label>  \\n    </ion-item>     \\n  \\n    <ion-item-options side=\\\"end\\\">\\n      <ion-item-option (click)=\\\"editarCtaCorriente(item)\\\"><ion-icon name=\\\"create\\\" ></ion-icon> Editar</ion-item-option>\\n    </ion-item-options>\\n\\n  </ion-item-sliding>\\n\\n  <!-- fab placed to the bottom end -->\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" (click)=\\\"nuevaCtaCorriente()\\\">\\n    <ion-fab-button>\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n</ion-content>\\n\";","import { Injectable } from '@angular/core';\nimport { AngularFirestore } from 'angularfire2/firestore';\nimport * as firebase from 'firebase';\nimport { CtaCorriente } from '../models/ctacorriente';\nimport { ClientesService } from './clientes.service';\nimport { MovimientoCtaCorriente } from '../models/movimientoCtaCorriente';\nimport { MovimientoCaja } from '../models/movimientoCaja';\nimport { CajasService } from './cajas.service';\nimport { BaseService } from './base.service';\nimport { ComerciosService } from './comercios.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CtaCorrientesService extends BaseService {\n\n  \n  constructor(\n    private firestore: AngularFirestore,\n    private clientesService:ClientesService,\n    private comerciosService:ComerciosService\n    ) {     \n      super(firestore); \n      this.comerciosService.getSelectedCommerce().subscribe(data=>{\n        // let comercio_seleccionadoId = localStorage.getItem('comercio_seleccionadoId'); \n        if(data){\n          \n          this.setPath('comercios/'+data.id+'/ctascorrientes')   \n         }\n        \n      })\n  }\n\n  \n  public create(data:CtaCorriente) {   \n\n    data.id = this.firestore.createId();\n\n    const param = JSON.parse(JSON.stringify(data));\n    this.firestore.collection(this.path).add({...param,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n    });  \n    \n    data.coTitularesId.forEach(element => {\n      this.clientesService.addCtaCorriente(element,data.id);\n    });\n    \n  }\n\n  public get(documentId: string) {\n    return this.firestore.collection(this.path).doc(documentId).snapshotChanges();\n  }\n\n  public getByComercioCliente(cliente){\n    let comercio_seleccionadoId = localStorage.getItem('comercio_seleccionadoId');\n    return this.firestore.collection(this.path, ref => \n        ref.where('coTitularesId','array-contains',cliente.id)).snapshotChanges();\n  }\n\n\n  public getByCliente(clienteId){\n    return this.firestore.collection(this.path, ref => \n        ref.where('coTitularesId','array-contains',clienteId)).snapshotChanges();\n  }\n\n\n  public getByClienteId(id) {   \n    return this.firestore.collection(this.path, ref =>ref.where(id,\"==\",\"clienteId\")).snapshotChanges();\n  } \n \n \n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListCtaCorrientesPage } from './list-cta-corrientes.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListCtaCorrientesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ListCtaCorrientesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListCtaCorrientesPageRoutingModule } from './list-cta-corrientes-routing.module';\n\nimport { ListCtaCorrientesPage } from './list-cta-corrientes.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ListCtaCorrientesPageRoutingModule\n  ],\n  declarations: [ListCtaCorrientesPage]\n})\nexport class ListCtaCorrientesPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2xpc3QtY3RhLWNvcnJpZW50ZXMvbGlzdC1jdGEtY29ycmllbnRlcy5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { CtaCorrientesService } from '../Services/cta-corrientes.service';\nimport { Comercio } from '../models/comercio';\nimport { ClientesService } from '../Services/clientes.service';\nimport { Router } from '@angular/router';\nimport { CtaCorriente } from '../models/ctacorriente';\nimport { AuthenticationService } from '../Services/authentication.service';\nimport { LoadingService } from '../Services/loading.service';\n\n@Component({\n  selector: 'app-list-cta-corrientes',\n  templateUrl: './list-cta-corrientes.page.html',\n  styleUrls: ['./list-cta-corrientes.page.scss'],\n})\nexport class ListCtaCorrientesPage implements OnInit {\n\n  public items =[];\n  public palabraFiltro =\"\"; \n  public itemsView =[];\n  public buscando = true;\n\n  constructor(\n    private ctasCorreintesService:CtaCorrientesService,\n    private clientesServices:ClientesService,\n    private router:Router,\n    private authenticationService:AuthenticationService,\n    private loadingService:LoadingService\n  ) {\n\n   \n\n    this.ctasCorreintesService.list().subscribe(cuentas =>{\n      this.items = [];\n\n      this.buscando = false;\n      cuentas.forEach((cta: any) => {           \n          var item:CtaCorriente = new CtaCorriente(this.authenticationService.getUID(), this.authenticationService.getNombre());\n          item.asignarValores(cta);       \n          \n          \n          item.coTitularesId.forEach(async clienteId => {\n            console.log(clienteId);\n            if(clienteId)\n              await this.clientesServices.get(clienteId).subscribe(snap =>{\n                item.clientes.push(snap.payload.data());\n              })\n          });\n\n          this.items.push(item); \n\n          console.log(item);\n      });  \n      this.buscar();\n    })\n  }\n\n  ngOnInit() {\n\n  }\n\n  buscar(){\n    \n    if(this.palabraFiltro != \"\"){\n      this.itemsView = [];\n     \n      this.items.forEach(item => {\n\n        item.clientes.forEach(cliente => {\n          if(cliente.nombre.toLowerCase().includes(this.palabraFiltro.toLowerCase())){\n            this.itemsView.push(item);\n            return;\n          }  \n        });\n\n        item.clientes.forEach(cliente => {\n          if(cliente.documento.toLowerCase().includes(this.palabraFiltro.toLowerCase())){\n            this.itemsView.push(item);\n            return;\n          }  \n        });\n\n      });   \n    }\n    \n    else{\n      console.log(this.itemsView)\n      this.itemsView = this.items;\n    }\n  }\n\n  seleccionar(item){\n    this.router.navigate(['details-cta-corriente',{\n      id: item.id\n    }]);\n  }\n\n  nuevaCtaCorriente(){\n    this.router.navigate(['form-cta-corriente']);\n  }\n\n  editarCtaCorriente(item){\n    this.router.navigate(['form-cta-corriente',{\n      id: item.id\n    }]);\n  }\n\n}\n","\r\nimport { MovimientoCtaCorriente } from './movimientoCtaCorriente';\r\n\r\nexport class CtaCorriente{\r\n    public id =\"\";\r\n    public comercioId= localStorage.getItem('comercio_seleccionadoId');   \r\n    public nombre=\"\";\r\n    public coTitularesId=[];\r\n    public montoActual=0;\r\n    public montoTotal =0;\r\n\r\n    public comercios = [];\r\n    public clientes =[];\r\n\r\n\r\n\tconstructor(\r\n        public vendedorId:\"\", \r\n        public vendedorNombre:\"\"\r\n\t\t){\r\n    }\r\n    \r\n    public asignarValores(init?: Partial<CtaCorriente>) {\r\n        Object.assign(this, init);\r\n    }\r\n}"],"sourceRoot":"webpack:///"}