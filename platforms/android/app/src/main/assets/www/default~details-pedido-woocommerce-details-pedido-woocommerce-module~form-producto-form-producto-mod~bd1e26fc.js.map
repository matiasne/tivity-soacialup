{"version":3,"sources":["./src/app/Services/productos.service.ts","./src/app/Services/variaciones-stocks.service.ts","./src/app/Services/wordpress/wordpress.service.ts","./src/app/models/variacionStock.ts"],"names":[],"mappings":"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","file":"default~details-pedido-woocommerce-details-pedido-woocommerce-module~form-producto-form-producto-mod~bd1e26fc.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { AngularFirestore } from 'angularfire2/firestore';\nimport * as firebase from 'firebase';\nimport { map } from 'rxjs/operators';\nimport { Producto } from '../models/producto';\nimport { variacionStock } from '../models/variacionStock';\nimport { BaseService } from './base.service';\nimport { ComerciosService } from './comercios.service';\nimport { KeywordService } from './keyword.service';\nimport { VariacionesStocksService } from './variaciones-stocks.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProductosService extends BaseService {\n\n  private woocommerceSyncPath =\"\"\n  constructor(\n    protected afs: AngularFirestore,\n    private comerciosService:ComerciosService,\n    private variacionesStockService:VariacionesStocksService\n  ) {\n    super(afs);   \n    this.comerciosService.getSelectedCommerce().subscribe(data=>{\n     // let comercio_seleccionadoId = localStorage.getItem('comercio_seleccionadoId'); \n      if(data){      \n        this.setPath('comercios/'+data.id+'/productos') \n      }     \n    })\n      \n  }\n\n  getWoocommerceValue(productoId){\n    this.woocommerceSyncPath = this.path+'/'+productoId+'/woocommerceSincData'\n    return this.afs.collection(this.woocommerceSyncPath).doc(\"1\").get()\n    .pipe(\n        map(doc => {\n            if (doc.exists) {\n        /* workaround until spread works with generic types */\n                const data = doc.data() as any;\n                const id = doc.id;\n                data.fromCache = doc.metadata.fromCache;\n                return { id, ...data };\n            }\n        })\n    ); \n  }\n\n  updateWoocommerceValues(productoId,values){\n    this.woocommerceSyncPath = this.path+'/'+productoId+'/woocommerceSincData'\n    this.afs.collection(this.woocommerceSyncPath).doc(\"1\").set(values).then(data=>{\n      console.log(\"Actualizados los valores de woocommerce\")\n    })\n  }\n\n  \n  deleteWoocommerceValues(id){\n    this.woocommerceSyncPath = this.path+'/'+id+'/woocommerceSincData'\n    this.afs.collection(this.woocommerceSyncPath).doc(\"1\").delete().then(data=>{\n      console.log(\"Actualizados los valores de woocommerce\")\n    })\n  }\n\n\n  getCollection(){\n    let comercio_seleccionadoId = localStorage.getItem('comercio_seleccionadoId'); \n    return 'comercios/'+comercio_seleccionadoId+'/productos';\n  }\n\n  \n  public getByName(name){\n    return this.afs.collection(this.path,ref=>ref.where(\"nombre\",\"==\",name)).snapshotChanges().pipe(\n      map(changes => {\n          return changes.map(a => {\n              const data:any = a.payload.doc.data();\n              data.id = a.payload.doc.id;\n              data.fromCache = a.payload.doc.metadata.fromCache;\n              return data;\n          });\n      })\n    );   \n  }\n\n  public updateStock(delta,productoId){ \n\n    var sfDocRef = this.afs.firestore.collection(this.path).doc(productoId);\n\n    return this.afs.firestore.runTransaction((transaction) => {\n      // This code may get re-run multiple times if there are conflicts.\n      return transaction.get(sfDocRef).then((sfDoc) => {\n          if (!sfDoc.exists) {\n              throw \"Document does not exist!\";\n          }\n          \n          var newStock = sfDoc.data().stock + delta;\n          transaction.update(sfDocRef, { stock: newStock });\n\n          let vStock:variacionStock = new variacionStock();\n          vStock.productoId = productoId; \n          vStock.stock = sfDoc.data().stock;\n          this.variacionesStockService.setPathProducto(productoId);\n          this.variacionesStockService.add(vStock).then(resp =>{           \n\n          }); \n\n      });\n  }).then(() => {\n      \n          \n          \n    \n  }).catch((error) => {\n      console.log(\"Transaction failed: \", error);\n  });\n\n  }\n\n  /*public create(data:Producto) {\n\n    this.keywordService.agregarKeywords(data, [data.nombre,...data.categorias]);\n\n    let time = new Date();\n      const param = JSON.parse(JSON.stringify(data));\n      this.firestore.doc(this.getCollection()+\"/\"+data.id).set( {...param,\n        createdAt: time,\n      });   \n     \n  }*/\n/*\n  public getAll() {   \n    return this.firestore.collection(this.getCollection(),ref=> ref.orderBy('nombre')).snapshotChanges();\n  }*/\n\n /* public update(data) {\n\n    console.log(data)\n\n    let time = new Date();\n\n    const param = JSON.parse(JSON.stringify(data));\n    return this.firestore.collection(this.getCollection()).doc(data.id).set({...param,\n      updatedAt: time,\n    },{merge:true});\n  }*/ \n\n\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFirestore } from 'angularfire2/firestore';\nimport { map } from 'rxjs/operators';\nimport { BaseService } from './base.service';\nimport { ComerciosService } from './comercios.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VariacionesStocksService extends BaseService {\n\n  private comercioId = \"\";\n  constructor(\n    protected afs: AngularFirestore,\n    private comerciosService:ComerciosService\n    ) {     \n      super(afs); \n      this.comerciosService.getSelectedCommerce().subscribe(data=>{\n        if(data){\n         this.comercioId = data.id\n         }        \n      })\n  }\n\n\n  setPathProducto(productoId){\n    this.setPath('comercios/'+this.comercioId+'/productos/'+productoId+'/variacionesStock')  \n  }\n\n  getLast(productoId){\n    this.setPathProducto(productoId)\n\n    return this.afs.collection(this.path, ref => ref.limit(1))\n            .snapshotChanges()\n            .pipe(\n                map(changes => {\n                    return changes.map(a => {\n                        const data:any = a.payload.doc.data();\n                        data.id = a.payload.doc.id;\n                        data.fromCache = a.payload.doc.metadata.fromCache;\n                        if(data.createdAt instanceof String || Number){\n                            data.createdAt = new Date(Number(data.createdAt))\n                        }\n                        else{\n                            data.createdAt = data.createdAt.toDate();\n                        }\n                           \n                        return data;\n                    });\n                })\n            );     \n\n  }\n\n}\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ComerciosService } from '../comercios.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WordpressService {\n\n  public apiUrl:string = '';\n  private siteURL:string  = 'http://laparrilladegerardo.com.ar'\n  private woocommercePart:string = '/wp-json/wp/v2/';\n  private tipoItem:string = \"\";\n\n  constructor( \n    public http:HttpClient,\n    private comercioService:ComerciosService \n  ) { }\n\n  setPart(part:string){\n    this.tipoItem = part;\n    this.apiUrl = this.siteURL+this.woocommercePart+this.tipoItem;\n  }\n\n  async login(){   \n    return new Promise((resolve,reject) =>{\n      this.comercioService.getWoocommerceValue(this.comercioService.getSelectedCommerceValue().id).subscribe(values=>{\n        let data = {\n          username:values.user,\n          password:values.password\n        }\n    \n        let httpHeaders = new HttpHeaders({\n          'Content-Type' : 'application/json'\n        });     \n        let options = {\n          headers: httpHeaders\n        };       \n    \n        this.apiUrl = values.url+\"/wp-json/jwt-auth/v1/token\"  \n        try{\n          let response = this.http.post(this.apiUrl,data,options).toPromise();\n          resolve(response);\n        }  \n        catch(err){\n          reject(err)\n        }       \n        \n      },err=>{\n        reject(err)\n      })\n    })\n   \n   \n\n  }\n\n  async obtainToken(){    \n    try{\n      let resp:any = await this.login()\n      localStorage.setItem('wordpress_token',resp.token)  \n    }\n    catch(err){\n      localStorage.setItem('wordpress_token',\"\") \n    }\n      \n  }\n\n  getToken(){\n    return localStorage.getItem('wordpress_token');\n  }\n\n  getAll(){\n    this.apiUrl = this.siteURL+this.woocommercePart+this.tipoItem;\n    return this.http.get(this.apiUrl); \n  }\n\n  getOne(id){\n    this.apiUrl = this.siteURL+this.woocommercePart+this.tipoItem+\"/\"+id;\n\n    let httpHeaders = new HttpHeaders({\n      'Content-Type' : 'application/json'\n    });     \n    let options = {\n      headers: httpHeaders\n    };     \n\n    console.log(this.apiUrl)\n    return this.http.get(this.apiUrl); \n  }\n\n  postOne(data){\n    this.apiUrl = this.siteURL+this.woocommercePart+this.tipoItem;\n\n    let httpHeaders = new HttpHeaders({\n      'Content-Type' : 'application/json'\n    });     \n    let options = {\n      headers: httpHeaders\n    };     \n\n    console.log(this.apiUrl)\n    return this.http.post(this.apiUrl,data,options); \n\n  }\n\n  updateOne(id, data){\n    this.apiUrl = this.siteURL+this.woocommercePart+this.tipoItem+\"/\"+id;\n\n    let httpHeaders = new HttpHeaders({\n      'Content-Type' : 'application/json'\n    });     \n    let options = {\n      headers: httpHeaders\n    };     \n\n    console.log(this.apiUrl)\n    return this.http.put(this.apiUrl,data,options); \n  }\n\n  deleteOne(id){\n    this.apiUrl = this.siteURL+this.woocommercePart+this.tipoItem+\"/\"+id;\n\n\n    console.log(this.apiUrl)\n    return this.http.delete(this.apiUrl); \n  }\n\n\n}\n","export class variacionStock{\r\n    public productoId =\"\";\r\n    public stock = 0;\r\n\r\n\tconstructor(\r\n\t\t\r\n\t\t){\r\n    }\r\n    \r\n    public asignarValores(init?: Partial<variacionStock>) {\r\n        Object.assign(this, init);\r\n    }\r\n}"],"sourceRoot":"webpack:///"}