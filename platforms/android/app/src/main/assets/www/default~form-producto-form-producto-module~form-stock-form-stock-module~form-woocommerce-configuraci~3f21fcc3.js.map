{"version":3,"sources":["./src/app/Services/woocommerce/woocommerce.service.ts"],"names":[],"mappings":"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","file":"default~form-producto-form-producto-module~form-stock-form-stock-module~form-woocommerce-configuraci~3f21fcc3.js","sourcesContent":["import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { Producto } from 'src/app/models/producto';\nimport { WCProduct } from 'src/app/models/woocommerce/product';\nimport { WoocommerceSyncData } from 'src/app/models/woocommerceSyncData';\nimport { CategoriasService } from '../categorias.service';\nimport { ComerciosService } from '../comercios.service';\nimport { FotoService } from '../fotos.service';\nimport { ProductosService } from '../productos.service';\nimport { WordpressService } from '../wordpress/wordpress.service';\nimport { CategoriesService } from './categories.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WoocommerceService {\n\n  private comercio:any\n  private apiUrl:string = '';\n  private siteURL:string  = ''\n  private woocommercePart:string = '/wp-json/wc/v3/';\n  private tipoItem:string = \"products\";\n\n  public progresoSend = new BehaviorSubject <any>(0);\n  public progresoReceived = new BehaviorSubject <any>(0);\n\n  private total = 0;\n  private psend = 0;\n  private preceived = 0;\n  \n  constructor( \n    private http:HttpClient,\n    private comerciosService:ComerciosService,\n    private productosServices:ProductosService,\n    private wordpressService:WordpressService,\n    private fotosService:FotoService,\n    private categoriasService:CategoriasService\n  ) {    \n    \n  }\n\n  setPart(part:string){\n    this.tipoItem = part;\n  }\n\n  obsProgresoSend(): Observable<any>{\n    return this.progresoSend.asObservable();\n  }\n\n  obsProgresoReceived(): Observable<any>{\n    return this.progresoReceived.asObservable();\n  }\n\n  test(){\n    let httpHeaders = new HttpHeaders({\n       'Access-Control-Allow-Origin':'*',\n       'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT',\n       'Access-Control-Allow-Headers': 'Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers',\n       'Content-Type' : 'application/json',\n       'Authorization' : 'Bearer '+this.wordpressService.getToken()\n     });      \n     let options = {\n       headers: httpHeaders\n     };     \n     \n    this.comercio = this.comerciosService.getSelectedCommerceValue()\n    this.apiUrl = this.comercio.woocommerce.url+this.woocommercePart+\"system_status?consumer_key=\"+this.comercio.woocommerce.consumerKey+\"&consumer_secret=\"+this.comercio.woocommerce.consumerSecret\n    return this.http.get(this.apiUrl,options); \n  }\n\n  \n  getAll(){\n    let httpHeaders = new HttpHeaders({\n    //   'Access-Control-Allow-Origin':'*',\n    //   'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT',\n    //   'Access-Control-Allow-Headers': 'Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers',\n       'Content-Type' : 'application/json',\n       'Authorization' : 'Bearer '+this.wordpressService.getToken()\n     });      \n     let options = {\n       headers: httpHeaders\n     };     \n     console.log(\"test\")\n    this.comercio = this.comerciosService.getSelectedCommerceValue()\n    this.apiUrl = this.comercio.woocommerce.url+this.woocommercePart+this.tipoItem+\"?consumer_key=\"+this.comercio.woocommerce.consumerKey+\"&consumer_secret=\"+this.comercio.woocommerce.consumerSecret\n    return this.http.get(this.apiUrl,options).toPromise(); \n  }\n\n  getOne(id){\n    this.comercio = this.comerciosService.getSelectedCommerceValue()\n    this.apiUrl = this.comercio.woocommerce.url+this.woocommercePart+this.tipoItem+\"/\"+id+\"?consumer_key=\"+this.comercio.woocommerce.consumerKey+\"&consumer_secret=\"+this.comercio.woocommerce.consumerSecret\n\n    let httpHeaders = new HttpHeaders({\n    //  'Access-Control-Allow-Origin':'*',\n    //  'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT',\n    //  'Access-Control-Allow-Headers': 'Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers',\n      'Content-Type' : 'application/json',\n      'Authorization' : 'Bearer '+this.wordpressService.getToken()\n    });      \n    let options = {\n      headers: httpHeaders\n    };  \n    return this.http.get(this.apiUrl,options); \n  }\n\n  postOne(data){    \n    this.comercio = this.comerciosService.getSelectedCommerceValue()\n    this.apiUrl = this.comercio.woocommerce.url+this.woocommercePart+this.tipoItem+\"?consumer_key=\"+this.comercio.woocommerce.consumerKey+\"&consumer_secret=\"+this.comercio.woocommerce.consumerSecret\n\n    let httpHeaders = new HttpHeaders({\n     // 'Access-Control-Allow-Origin':'*',\n    //  'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT',\n    //  'Access-Control-Allow-Headers': 'Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers',\n      'Content-Type' : 'application/json',\n      'Authorization' : 'Bearer '+this.wordpressService.getToken()\n    });      \n    let options = {\n      headers: httpHeaders\n    };     \n\n    return this.http.post(this.apiUrl,data,options); \n  }\n\n  updateOne(id, data){\n    this.comercio = this.comerciosService.getSelectedCommerceValue()\n    this.apiUrl = this.comercio.woocommerce.url+this.woocommercePart+this.tipoItem+\"/\"+id+\"?consumer_key=\"+this.comercio.woocommerce.consumerKey+\"&consumer_secret=\"+this.comercio.woocommerce.consumerSecret\n\n    let httpHeaders = new HttpHeaders({\n      // 'Access-Control-Allow-Origin':'*',\n     //  'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT',\n     //  'Access-Control-Allow-Headers': 'Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers',\n       'Content-Type' : 'application/json',\n       'Authorization' : 'Bearer '+this.wordpressService.getToken()\n     });      \n     let options = {\n       headers: httpHeaders\n     };     \n    return this.http.put(this.apiUrl,data,options); \n  }\n\n  deleteOne(id){\n\n    let httpHeaders = new HttpHeaders({\n      // 'Access-Control-Allow-Origin':'*',\n     //  'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT',\n     //  'Access-Control-Allow-Headers': 'Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers',\n       'Content-Type' : 'application/json',\n       'Authorization' : 'Bearer '+this.wordpressService.getToken()\n     });      \n     let options = {\n       headers: httpHeaders\n     };     \n\n    this.comercio = this.comerciosService.getSelectedCommerceValue()\n    this.apiUrl = this.comercio.woocommerce.url+this.woocommercePart+this.tipoItem+\"/\"+id+\"?consumer_key=\"+this.comercio.woocommerce.consumerKey+\"&consumer_secret=\"+this.comercio.woocommerce.consumerSecret\n\n    return this.http.delete(this.apiUrl,options); \n  }\n\n  updateStock(producto:Producto){\n\n    if(producto.woocommerce.id){\n      let data = {\n        stock: producto.stock\n      }  \n      this.comercio = this.comerciosService.getSelectedCommerceValue()\n      this.apiUrl = this.comercio.woocommerce.url+this.woocommercePart+this.tipoItem+\"/\"+producto.id+\"?consumer_key=\"+this.comercio.woocommerce.consumerKey+\"&consumer_secret=\"+this.comercio.woocommerce.consumerSecret\n\n      let httpHeaders = new HttpHeaders({\n        'Content-Type' : 'application/json'\n      });     \n      let options = {\n        headers: httpHeaders\n      };     \n      return this.http.put(this.apiUrl,data,options); \n   } \n\n  }\n\n  convertWCtoFirebase(productoWC){\n    this.comercio = this.comerciosService.getSelectedCommerceValue()\n\n    let prod = new Producto()\n    prod.nombre = productoWC.name\n    prod.precio = productoWC.regular_price\n    prod.descripcion = productoWC.description\n    prod.promocion = productoWC.price\n    prod.barcode = productoWC.sku\n\n    prod.updatedAt = new Date()\n    \n    if(productoWC.manage_stock)\n      prod.stock = productoWC.stock_quantity   \n    \n    return prod;\n  }\n\n  async convertFirebasetoWC(producto:Producto){\n\n    this.comercio = this.comerciosService.getSelectedCommerceValue()\n\n    let wcProducto = new WCProduct();   \n    wcProducto.name = producto.nombre;\n    wcProducto.regular_price = producto.precio.toString();\n    wcProducto.description = producto.descripcion;\n    wcProducto.price = producto.promocion.toString();\n    wcProducto.sku = producto.barcode;   \n    \n    if(this.comercio.config.stock)\n      wcProducto.manage_stock = true;\n    else\n      wcProducto.manage_stock = false;\n      \n    wcProducto.stock_quantity = producto.stock.toString();\n    wcProducto.images = []; \n\n    wcProducto.categories = []\n    for(let cat of producto.categorias){\n                \n      if(cat.woocommerce && cat.woocommerce.id){\n          let categorie = {\n              id:cat.woocommerce.id,\n              name:cat.nombre\n          }\n          wcProducto.categories.push(categorie)\n      }\n      else{\n          console.log(\"Categoria no sincronizada con woocommerce!!!\");\n      }\n      \n        \n    }\n\n    for(const img of producto.imagenes){\n        wcProducto.images.push({\"src\":img.url})\n    }\n    return wcProducto;\n\n  }\n\n\n  \n  async crearProductoInWC(p:Producto){  \n   \n    \n      let producto = new Producto()\n      producto.asignarValores(p) //esto para que cargue las variables a los productos viejos aunque sea vacias\n      console.log(\"creando en wc el producto id:\"+producto.id)\n      let wcProducto = await this.convertFirebasetoWC(producto);   \n      \n      wcProducto[\"meta_data\"] = [{\n\n      }]\n      \n\n      console.log(\"creando\")\n      this.incrementarEnvio();\n\n      \n\n      try{\n        const data = JSON.parse(JSON.stringify(wcProducto));\n        let resp:any = await this.postOne(data).toPromise()\n        this.incrementarRespuesta();\n\n        p.woocommerce ={\n          id:resp.id,\n          lastUpdate:new Date(),\n          sincronizado:true\n        }     \n\n        this.productosServices.update(p).then(data=>{\n          console.log(\"LastUpdate de Woocommerce guardado\")\n        })\n      }\n      catch(err){\n        console.log(err)\n      }   \n  }\n\n  async actualizarProductoInWC(producto:Producto){\n    //busco el producto por id de woocommerce elimino todas las imágenes del mismo, elimino el producto. cargo el producto de nuevo\n    \n      this.incrementarEnvio();\n      \n     \n      console.log(\"actualizando id:\"+producto.woocommerce.id)\n\n      try{\n        await this.getOne(producto.woocommerce.id).toPromise()\n        let wcProducto = await this.convertFirebasetoWC(producto);\n        wcProducto.id = producto.woocommerce.id\n      \n        \n        try{\n          await this.updateOne(wcProducto.id,wcProducto).toPromise()\n          console.log(\"Porducto actualizado en woocommerce\");\n          producto.woocommerce.lastUpdate = new Date();\n\n\n        }\n        catch(err){\n          console.log(err)\n         \n        }\n      \n      }\n      catch(err){\n        console.log(err)\n        if(err.error.code == \"woocommerce_rest_product_invalid_id\"){\n          console.log(\"El id del producto no se encuentra\")\n          await this.crearProductoInWC(producto)\n        }\n        if(err.error.code == \"woocommerce_rest_cannot_edit\"){\n          console.log(\"No tienes permiso para editar\")\n        }\n      }    \n    \n  }\n\n  public syncFirebaseToWC(){\n    this.productosServices.list().subscribe(productos =>{\n      productos.forEach(element => {\n        let values = new WoocommerceSyncData()\n        values.sincronizado = true;\n        values.changeDate = new Date()\n        this.productosServices.updateWoocommerceValues(element.id,values)\n      });\n    })\n  }\n\n  public syncFirebaseToWC_OLD():Promise<any>{\n\n    return new Promise((resolve,reject)=>{\n\n      this.psend = 0;\n      this.preceived = 0;\n\n      console.log(\"sincronizando...\")\n\n      let subsItemsProd = this.productosServices.list().subscribe(async productos => { \n        subsItemsProd.unsubscribe();\n        this.total = productos.length;\n\n        for(let p of productos){        \n        \n          let prod = new Producto()\n          prod.asignarValores(p) //esto para que cargue las variables a los productos viejos aunque sea vacias\n\n          if(p.woocommerce.id == \"\"){       \n            await this.crearProductoInWC(prod);        \n          }\n          else{ \n    \n            if(p.woocommerce.id){ \n    \n              try{\n                console.log(prod.nombre)\n                let productos = await this.getOne(p.woocommerce.id).toPromise()\n\n                \n\n                prod.updatedAt = prod.updatedAt.toDate().setSeconds(prod.updatedAt.toDate().getSeconds());\n                p.woocommerce.lastUpdate = p.woocommerce.lastUpdate.toDate().setSeconds(p.woocommerce.lastUpdate.toDate().getSeconds() + 100);\n      \n                console.log(p.woocommerce.lastUpdate)\n                console.log(prod.updatedAt)\n\n                if(prod.updatedAt > p.woocommerce.lastUpdate){                     \n                  await this.actualizarProductoInWC(prod);               \n                } \n                else{\n                  console.log(\"Producto existe y está actualizado:\")                \n                }  \n              }\n              catch(err){\n                console.log(err)\n                if(err.error.code == \"woocommerce_rest_term_invalid\"){\n                  await this.crearProductoInWC(prod)  \n                }\n                if(err.error.code == \"woocommerce_rest_product_invalid_id\"){\n                  await this.crearProductoInWC(prod)                    \n                }\n                if(err.error.code == \"woocommerce_rest_cannot_edit\"){                  \n                  console.log(\"No tienes permiso para editar\")\n                }\n              }                            \n            }\n            else{          \n              await this.crearProductoInWC(prod)\n            }\n          }            \n        }\n        resolve(true)\n        \n      },err=>{\n        reject()\n      })\n\n\n    })\n\n\n    \n    \n  }\n\n\n\n  private incrementarEnvio(){\n    this.psend++;\n    let progreso = this.psend/this.total\n    this.progresoSend.next(progreso);\n  }\n\n  private incrementarRespuesta(){   \n    this.preceived++;\n    let progreso = this.preceived/this.total\n    console.log(this.total+\" \"+this.preceived+\" \"+progreso+\" \"+this.progresoReceived.value)\n    this.progresoReceived.next(progreso);\n  }\n\n\n\n}\n"],"sourceRoot":"webpack:///"}