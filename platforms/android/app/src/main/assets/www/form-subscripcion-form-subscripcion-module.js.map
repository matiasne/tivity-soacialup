{"version":3,"sources":["./src/app/form-subscripcion/form-subscripcion.page.html","./src/app/form-subscripcion/form-subscripcion-routing.module.ts","./src/app/form-subscripcion/form-subscripcion.module.ts","./src/app/form-subscripcion/form-subscripcion.page.scss","./src/app/form-subscripcion/form-subscripcion.page.ts"],"names":[],"mappings":"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","file":"form-subscripcion-form-subscripcion-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Form Subscripción</ion-title>    \\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n  <div class=\\\"ion-padding\\\">\\n    <form [formGroup]=\\\"datosForm\\\">\\n     <ion-button size=\\\"large\\\" (click)=\\\"seleccionarCliente()\\\"  expand=\\\"block\\\">Seleccionar Cliente * </ion-button>\\n     \\n     <ion-button size=\\\"large\\\" (click)=\\\"seleccionarServicio()\\\"  expand=\\\"block\\\">Seleccionar Servicio * </ion-button>\\n\\n     <span *ngIf=\\\"cliente\\\">\\n        {{cliente.nombre}}\\n        <ion-button  (click)=\\\"eliminarCliente()\\\">Eliminar</ion-button>\\n      </span>\\n      <br>\\n      <span *ngIf=\\\"servicio\\\">\\n        > {{servicio.nombre}} <br>\\n        {{servicio.planes[servicio.plan].nombre}}, {{servicio.planes[servicio.plan].dias}} días por {{servicio.planes[servicio.plan].precio}}<br>\\n        {{servicio.descripcion_venta}}\\n        <ion-button  (click)=\\\"eliminarServicio()\\\">Eliminar</ion-button>\\n      </span>\\n\\n     <div *ngIf=\\\"servicio\\\">\\n        \\n      </div>\\n     \\n    </form>\\n  </div>\\n</ion-content>\\n<ion-toolbar>\\n  <ion-button size=\\\"large\\\" (click)=\\\"guardar()\\\"  expand=\\\"block\\\">Guardar</ion-button>\\n  \\n</ion-toolbar>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FormSubscripcionPage } from './form-subscripcion.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FormSubscripcionPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FormSubscripcionPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FormSubscripcionPageRoutingModule } from './form-subscripcion-routing.module';\n\nimport { FormSubscripcionPage } from './form-subscripcion.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    FormSubscripcionPageRoutingModule\n  ],\n  declarations: [FormSubscripcionPage]\n})\nexport class FormSubscripcionPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm0tc3Vic2NyaXBjaW9uL2Zvcm0tc3Vic2NyaXBjaW9uLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\nimport { ModalController } from '@ionic/angular';\nimport { ListClientesPage } from '../list-clientes/list-clientes.page';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ListServiciosPage } from '../list-servicios/list-servicios.page';\nimport { SubscripcionesService } from '../Services/subscripciones.service';\nimport { AuthenticationService } from '../Services/authentication.service';\nimport { AddServicioSubscripcionPage } from '../add-servicio-subscripcion/add-servicio-subscripcion.page';\nimport { ToastService } from '../Services/toast.service';\nimport { Subscripcion } from '../models/subscripcion';\nimport { ClientesService } from '../Services/clientes.service';\nimport { PlanesService } from '../Services/planes.service';\nimport { Servicio } from '../models/servicio';\nimport { ServiciosService } from '../Services/servicios.service';\nimport { SelectClientePage } from '../select-cliente/select-cliente.page';\n\n\n@Component({\n  selector: 'app-form-subscripcion',\n  templateUrl: './form-subscripcion.page.html',\n  styleUrls: ['./form-subscripcion.page.scss'],\n})\nexport class FormSubscripcionPage implements OnInit {\n\n  public datosForm: FormGroup;\n  \n  public cliente;\n  public servicio;\n  public planes;\n\n  submitted = false;\n  subs:any;\n  titulo =\"Nueva Subscripción\";\n  updating =false;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    public modalController: ModalController,\n    public router:Router,\n    public subscripcionService:SubscripcionesService,\n    private clientesService:ClientesService,\n    private servicioService:ServiciosService,\n    public authService:AuthenticationService,\n    private toastServices:ToastService,\n    private route: ActivatedRoute,\n  ) { \n\n    this.datosForm = this.formBuilder.group({\n      plan: ['', Validators.required],\n      pagoAdelantado :['', Validators.required],\n      descipcion :[''],\n      clienteRef:['', Validators.required],\n      servicioRef:['', Validators.required],\n      vendedorRef:['',Validators.required],\n      vendedor_nombre:[''],\n      createdAt:[''],\n      fechaInicio:['']\n    });\n\n   \n\n    if(this.route.snapshot.params.id){\n      \n      this.updating = true;\n      this.titulo = \"Editar Subscripción\";\n      this.subs = this.subscripcionService.get(this.route.snapshot.params.id).subscribe(data=>{\n        this.datosForm.patchValue(data.payload.data())\n        \n       \n      });\n    }\n    else{\n      \n    }\n\n  }\n\n  ngOnInit() {\n\n  }\n\n  async seleccionarCliente(){\n    const modal = await this.modalController.create({\n      component: SelectClientePage      \n    });\n    modal.onDidDismiss()\n    .then((retorno) => {\n      if(retorno.data)\n        this.cliente = retorno.data.item        \n    });\n    return await modal.present();\n  }\n\n  async seleccionarServicio(){\n    const modal = await this.modalController.create({\n      component: ListServiciosPage      \n    });\n    modal.onDidDismiss()\n    .then((retorno) => {\n      if(retorno.data){\n        console.log(retorno.data);\n        if(retorno.data){\n          this.agregarServicio(retorno.data.item);        \n        }        \n      }    \n    });\n    return await modal.present();\n  }\n\n  async agregarServicio(servicio){\n    \n    const modal = await this.modalController.create({\n      component: AddServicioSubscripcionPage,\n      componentProps: { servicio: servicio }\n    });\n    modal.onDidDismiss()\n    .then((retorno) => {\n      if(retorno.data){\n        this.servicio = retorno.data.item;        \n      }\n    });\n    return await modal.present();\n    \n\n  }\n\n\n  eliminarCliente(){\n    this.cliente = \"\";\n  }\n\n  eliminarServicio(){\n    this.servicio = \"\";\n  }\n\n  get f() { return this.datosForm.controls; }\n\n  guardar(){\n\n    this.submitted = true;\n\n    var vendedorId = this.authService.getUID();\n    console.log(vendedorId)\n    this.datosForm.patchValue({\n      vendedorRef: this.authService.getRef(vendedorId)\n    });\n\n    this.datosForm.patchValue({\n      servicioRef: this.servicioService.getRef(this.servicio.id)\n    });\n\n    this.datosForm.patchValue({\n      clienteRef: this.clientesService.getRef(this.cliente.id)\n    });\n\n    this.datosForm.patchValue({\n      planRef: this.clientesService.getRef(this.servicio.plan.id)\n    });\n\n    this.datosForm.patchValue({\n      pagoAdelantado: this.servicio.pagoAdelantado\n    });\n\n    this.datosForm.patchValue({\n      descipcion_venta: this.servicio.descripcion_venta\n    });\n\n    this.datosForm.patchValue({\n      fechaInicio: this.servicio.fechaInicio\n    });\n\n   \n\n   \n\n    var vendedor_nombre = this.authService.getNombre();\n    console.log(vendedorId)\n    this.datosForm.patchValue({\n      vendedor_nombre: vendedor_nombre\n    });\n\n\n    console.log(this.datosForm.value);\n\n    if (this.datosForm.invalid) {\n      this.toastServices.alert('Por favor completar todos los campos marcados con * antes de continuar',\"\");\n      return;\n    } \n\n    this.subscripcionService.add(this.datosForm.value).then(data=>{\n      console.log(data);\n    });\n\n    \n  }\n\n}\n"],"sourceRoot":"webpack:///"}